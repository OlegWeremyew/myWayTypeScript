(this.webpackJsonpmyWayTypeScript=this.webpackJsonpmyWayTypeScript||[]).push([[3],{294:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var a=s(3),i=s(32),o=(s(0),s(7)),r=s(17),n=s(1),u=function(t){return{isAuth:t.auth.isAuth}};function c(t){return Object(r.b)(u)((function(e){var s=e.isAuth,r=Object(i.a)(e,["isAuth"]);return s?Object(n.jsx)(t,Object(a.a)({},r)):Object(n.jsx)(o.a,{to:"/login"})}))}},298:function(t,e,s){t.exports={profile:"Profile_profile__2hEbm",ava:"Profile_ava__1yQJQ"}},299:function(t,e,s){t.exports={ground:"ProfileInfo_ground__28MUJ",ava:"ProfileInfo_ava__1Sv2V",avatar:"ProfileInfo_avatar__23WhG",mainPhoto:"ProfileInfo_mainPhoto__2Pzut"}},300:function(t,e,s){t.exports={myPosts:"MyPosts_myPosts__2ZG6g",posts:"MyPosts_posts__2UAWW"}},301:function(t,e,s){t.exports={item:"Post_item__qV_PV",itemText:"Post_itemText__1Jpz_"}},302:function(t,e,s){"use strict";s.r(e);var a=s(24),i=s(25),o=s(27),r=s(26),n=s(0),u=s.n(n),c=s(298),d=s.n(c),p=s(299),l=s.n(p),h=s.p+"static/media/avatar_for_profile.e4c1e159.jpg",j=s(1),f=function(t){Object(o.a)(s,t);var e=Object(r.a)(s);function s(){var t;Object(a.a)(this,s);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateUserStatus(t.state.status)},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(t,e){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[!this.state.editMode&&Object(j.jsx)("div",{children:Object(j.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"------"})}),this.state.editMode&&Object(j.jsx)("div",{children:Object(j.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,value:this.state.status,onBlur:this.deactivateEditMode})})]})}}]),s}(u.a.Component),b=function(t){var e=t.profile,s=t.status,a=t.updateUserStatus,i=t.savePhoto,o=t.isOwner;return Object(j.jsx)("div",{className:l.a.profile,children:Object(j.jsxs)("div",{className:l.a.avatarBlock,children:[Object(j.jsxs)("div",{className:l.a.avatar,children:[Object(j.jsx)("img",{className:l.a.mainPhoto,alt:"ava",src:e&&null!==e.photos.large?e.photos.large:h}),o&&Object(j.jsx)("input",{type:"file",onChange:function(t){return function(t){t.target.files.length&&i(t.target.files[0])}(t)}})]}),Object(j.jsx)(f,{status:s,updateUserStatus:a})]})})},v=s(92),O=s(300),m=s.n(O),x=s(301),P=s.n(x),_=function(t){return Object(j.jsxs)("div",{className:P.a.item,children:[Object(j.jsx)("img",{src:"https://slovami.net/wp-content/uploads/thumbs_dir/the-most-beautiful-guys-russia-4-1-nwkkkydf2f1mhw9a4ijzfs2ktasvevyjiyi4xibqis.jpg",alt:"ava",title:"ava"}),Object(j.jsxs)("div",{className:P.a.itemText,children:[t.message,Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["like: ",t.likesCount]})})]})]},t.id)},g=s(86),y=s(122),S=s(82),k=s(34),U=Object(S.a)(10),A=u.a.memo((function(t){var e=t.profilePage.posts.map((function(t){return Object(j.jsx)(_,{message:t.message,likesCount:t.likesCount,id:t.id},t.id)}));return Object(j.jsxs)("div",{className:m.a.myPosts,children:[Object(j.jsx)("h3",{children:"My posts"}),Object(j.jsx)(M,{onSubmit:function(e){t.onAddPost(e.AddNewPost)}}),Object(j.jsx)("div",{className:m.a.posts,children:e})]})})),M=Object(y.a)({form:"ProfileAddNewPostForm"})((function(t){return Object(j.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(j.jsx)("div",{children:Object(j.jsx)(g.a,{component:k.b,name:"AddNewPost",placeholder:"Write your message",validate:[S.b,U]})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:"Add post"})})]})})),w=s(17),I=Object(w.b)((function(t){return{profilePage:t.profilePage}}),(function(t){return{onAddPost:function(e){t(Object(v.a)(e))}}}))(A),N=function(t){return Object(j.jsxs)("div",{className:d.a.profile,children:[Object(j.jsx)(b,{profile:t.profile,status:t.status,updateUserStatus:t.updateUserStatus,isOwner:t.isOwner,savePhoto:t.savePhoto}),Object(j.jsx)(I,{})]})},C=s(10),D=s(3),T=s(7),W=s(294),z=function(t){Object(o.a)(s,t);var e=Object(r.a)(s);function s(){return Object(a.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.userId;t||(t=this.props.authorizedUserID)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getUserStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.userId!==t.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(j.jsx)(N,{isOwner:!this.props.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto})}}]),s}(u.a.Component),E=Object(C.d)(Object(w.b)((function(t){return{profile:t.profilePage.profile,isAuth:t.auth.isAuth,status:t.profilePage.status,authorizedUserID:t.auth.data.userId}}),{getUserProfile:v.b,getUserStatus:v.c,updateUserStatus:v.f,savePhoto:v.e}),(function(t){return function(e){var s=Object(T.h)(),a=Object(T.f)();return Object(j.jsx)(t,Object(D.a)(Object(D.a)({},e),{},{userId:s.userId,location:a}))}}),W.a)(z);e.default=E}}]);
//# sourceMappingURL=3.a69cf499.chunk.js.map