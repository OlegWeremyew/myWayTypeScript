(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[7],{328:function(e,t,s){e.exports={chat__item:"Messages_chat__item__M8tP2"}},329:function(e,t,s){e.exports={message:"Message_message__3y-12",message__item:"Message_message__item__1P-zd",message__userName:"Message_message__userName__liBCF",message__img:"Message_message__img__2xFCT",message__text:"Message_message__text__1r__e"}},330:function(e,t,s){e.exports={form__btn:"AddMessageForm_form__btn__3NQLC",textarea:"AddMessageForm_textarea__2V23D"}},331:function(e,t,s){e.exports={chatBlock:"Chat_chatBlock__2VIOb"}},332:function(e,t,s){e.exports={chatPageBlock:"ChatPage_chatPageBlock__GbHGB",chatPage__title:"ChatPage_chatPage__title__25xdr"}},339:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(20),n=s(328),i=s.n(n),_=s(19),o=s(329),j=s.n(o),l=s(17),m=s(9),u=s(1),b=c.a.memo((function(e){var t=e.message;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:j.a.message,children:[Object(u.jsxs)("div",{className:j.a.message__item,children:[Object(u.jsx)(l.b,{to:"".concat(m.a.PROFILE,"/").concat(t.userId),children:Object(u.jsx)("img",{className:j.a.message__img,src:t.photo,alt:"avatar",title:"avatar ".concat(t.userName)})}),Object(u.jsx)("div",{className:j.a.message__userName,children:t.userName}),Object(u.jsx)("br",{})]}),Object(u.jsx)("div",{className:j.a.message__text,children:t.message})]}),Object(u.jsx)("hr",{})]})})),g=function(e){return e.chat.status},h=function(e){return e.chat.messages},d=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),s=t[0],c=t[1],n=Object(_.d)(h),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;s&&(null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[n]),Object(u.jsxs)("div",{className:i.a.chat__item,onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop)-t.clientHeight<300?!s&&c(!0):s&&c(!1)},children:[n.map((function(e){return Object(u.jsx)(b,{message:e},e.id)})),Object(u.jsx)("div",{ref:o})]})},O=s(330),x=s.n(O),f=s(70),v=function(){var e=Object(_.c)(),t=Object(a.useState)(""),s=Object(r.a)(t,2),c=s[0],n=s[1],i=Object(_.d)(g);return Object(u.jsxs)("div",{children:[Object(u.jsx)("textarea",{className:x.a.textarea,placeholder:"write your message \u2709",value:c,onChange:function(e){return function(e){n(e)}(e.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(e(Object(f.b)(c)),n(""))}}),Object(u.jsx)("div",{className:x.a.form__btn,onClick:function(){c.trim()&&(e(Object(f.b)(c)),n(""))},children:Object(u.jsx)("button",{disabled:"ready"!==i,children:"Send"})})]})},N=s(331),p=s.n(N),P=function(){var e=Object(_.c)(),t=Object(_.d)(g);return Object(a.useEffect)((function(){return e(Object(f.c)()),function(){e(Object(f.d)())}}),[]),Object(u.jsxs)(u.Fragment,{children:["error"===t&&Object(u.jsx)("div",{children:"Some error occurred. Please refresh this page"}),Object(u.jsxs)("div",{className:p.a.chatBlock,children:[Object(u.jsx)(d,{}),Object(u.jsx)(v,{})]})]})},k=s(332),M=s.n(k);t.default=function(){return Object(u.jsxs)("section",{className:M.a.chatPageBlock,children:[Object(u.jsx)("div",{className:M.a.chatPage__title,children:"Common chat"}),Object(u.jsx)(P,{})]})}}}]);
//# sourceMappingURL=7.279350c4.chunk.js.map