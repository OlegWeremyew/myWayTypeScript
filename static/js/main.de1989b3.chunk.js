(this.webpackJsonpmyWayTypeScript=this.webpackJsonpmyWayTypeScript||[]).push([[0],{21:function(e,t,s){e.exports={dialogs:"Messages_dialogs__3WgMj",dialogItem:"Messages_dialogItem__3jFPD",dialog:"Messages_dialog__GFzRM"}},22:function(e,t,s){e.exports={ground:"ProfileInfo_ground__1iuZd",ava:"ProfileInfo_ava__1jSav",avatar:"ProfileInfo_avatar__22Iyr"}},24:function(e,t,s){e.exports={appContent:"App_appContent__31heF",appContentWindow:"App_appContentWindow__2gnhC"}},26:function(e,t,s){e.exports={userPhoto:"Users_userPhoto__jEelu",selectedPage:"Users_selectedPage__2nEHL"}},27:function(e,t,s){e.exports={myPosts:"MyPosts_myPosts__FQQlZ",posts:"MyPosts_posts__YPrmi"}},28:function(e,t,s){e.exports={item:"Post_item__1LZi-",itemText:"Post_itemText__3jxIt"}},29:function(e,t,s){e.exports={header:"Header_header__2rKXS",loginBlock:"Header_loginBlock__1OEPA"}},40:function(e,t,s){e.exports={footer:"Footer_footer__3XO3I"}},41:function(e,t,s){e.exports={news:"News_news__16Ki9"}},42:function(e,t,s){e.exports={music:"Music_music__20urC"}},43:function(e,t,s){e.exports={friends:"Friends_friends__2fVYI"}},44:function(e,t,s){e.exports={settings:"Settings_settings__ZkkZz"}},45:function(e,t,s){e.exports={message:"Message_message__1KS8B"}},46:function(e,t,s){e.exports={dialog:"DialogsItem_dialog__2sybv"}},48:function(e,t,s){e.exports={preloader:"Preloader_preloader__1Oc1j"}},49:function(e,t,s){e.exports={profile:"Profile_profile__3Z-pR",ava:"Profile_ava__3Hnfg"}},5:function(e,t,s){e.exports={nav:"Navbar_nav__ySm9p",item:"Navbar_item__2xv0e",activeLink:"Navbar_activeLink__1hYAc"}},55:function(e,t,s){},81:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=s(20),r=s.n(i),c=(s(55),s(9)),o=s(14),u=s(2),l=s(38),d=s.n(l).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f5a121b3-d5d2-4866-a73a-ab1418f0e4d8"}}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return d.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},g=function(e){return d.get("profile/".concat(e))},b=function(e){return d.get("profile/status/".concat(e))},p=function(e){return d.put("profile/status",{status:e})},h=function(){return d.get("auth/me")},O={posts:[{message:"Hello",likesCount:12,id:1},{message:"Dinosaurus are great",likesCount:17,id:2}],newPostText:"",profile:null,status:""},f=function(e){return{type:"UPDATE_NEW_POST_TEXT",newText:e}},m=function(e){return{type:"SET-STATUS",status:e}},x={users:[{name:"Oleg",id:1,img:"https://avatars.mds.yandex.net/get-zen_doc/3986249/pub_607ecd1d13c71c1ca8a34192_607ee065330a4f14d551104b/scale_1200"},{name:"Diana",id:2,img:"https://avatars.mds.yandex.net/i?id=64b380ea3aa0d80cad94cb1a24a3b3f5-4233014-images-thumbs&ref=rim&n=33&w=150&h=150"},{name:"Fat cat",id:3,img:"https://data.whicdn.com/images/310252363/original.jpg"},{name:"Dimka",id:4,img:"https://i.pinimg.com/originals/b7/44/46/b744464dd3d970ad96745be8de69d755.jpg"},{name:"Ella",id:5,img:"https://st.depositphotos.com/1023162/5099/i/950/depositphotos_50991807-stock-photo-sexy-woman-in-fashion-sunglasses.jpg"},{name:"Makar",id:6,img:"https://avatars.mds.yandex.net/i?id=55d09aa1629f72a149098b2c3127e039-5222024-images-thumbs&ref=rim&n=33&w=150&h=150"}],messages:[{message:"Hi",id:1},{message:"Ho",id:2},{message:"He",id:3},{message:"Hu",id:4},{message:"Hio",id:5},{message:"Hia",id:6}],newMessageText:""},v=function(e){return{type:"UPDATE_NEW_MESSAGE_TEXT",newMessage:e}},_={},P={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},S=function(e){return{type:"FOLLOW",userID:e}},T=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},w=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-IN-PROGRESS",followingInProgress:e,userId:t}},E={data:{},isFetching:!0,isAuth:!1},N=s(39),y=Object(c.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var s={id:(new Date).getTime(),message:e.newPostText,likesCount:12};return Object(u.a)(Object(u.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[s]),newPostText:""});case"UPDATE_NEW_POST_TEXT":return Object(u.a)(Object(u.a)({},e),{},{newPostText:t.newText});case"SET-USER-PROFILE":return Object(u.a)(Object(u.a)({},e),{},{profile:t.profile});case"SET-STATUS":return Object(u.a)(Object(u.a)({},e),{},{status:t.status});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":var s={id:(new Date).getTime(),message:e.newMessageText};return Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(o.a)(e.messages),[s]),newMessageText:""});case"UPDATE_NEW_MESSAGE_TEXT":return Object(u.a)(Object(u.a)({},e),{},{newMessageText:t.newMessage});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(u.a)(Object(u.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(u.a)(Object(u.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(u.a)(Object(u.a)({},e),{},{users:Object(o.a)(t.users)});case"SET-CURRENT-PAGE":return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-USERS-COUNT":return Object(u.a)(Object(u.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE-IS-FETCHING":return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-IN-PROGRESS":return Object(u.a)(Object(u.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(u.a)(Object(u.a)({},e),{},{data:Object(u.a)(Object(u.a)({},e.data),{},{email:t.data.email,login:t.data.login,userId:t.data.userId}),isAuth:!0});case"TOGGLE-IS-FETCHING":return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-AUTH":return Object(u.a)(Object(u.a)({},e),{},{isAuth:t.isAuth});default:return e}}}),A=Object(c.d)(y,Object(c.a)(N.a)),I=s(24),C=s.n(I),U=s(5),k=s.n(U),M=s(4),F=s(0),L=function(){return Object(F.jsxs)("nav",{className:k.a.nav,children:[Object(F.jsx)("div",{className:k.a.item,children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/profile",children:"Profile"})}),Object(F.jsx)("div",{className:"".concat(k.a.item," ").concat(k.a.active),children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/messages",children:"Message"})}),Object(F.jsx)("div",{className:"".concat(k.a.item," ").concat(k.a.active),children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/users",children:"Users"})}),Object(F.jsx)("div",{className:k.a.item,children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/news",children:"News"})}),Object(F.jsx)("div",{className:k.a.item,children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/music",children:"Music"})}),Object(F.jsx)("div",{className:k.a.item,children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/settings",children:"Settings"})}),Object(F.jsx)("div",{className:k.a.item,children:Object(F.jsx)(M.b,{className:function(e){return e.isActive?k.a.activeLink:""},to:"/friends",children:"Friends"})})]})},D=s(40),G=s.n(D),R=function(){return Object(F.jsx)("div",{className:G.a.footer,children:"Footer"})},W=s(3),H=s(41),z=s.n(H),B=function(){return Object(F.jsx)("div",{className:z.a.news,children:"News"})},X=s(42),Z=s.n(X),K=function(){return Object(F.jsx)("div",{className:Z.a.music,children:"Music"})},Y=s(43),J=s.n(Y),Q=function(){return Object(F.jsx)("div",{className:J.a.friends,children:"Friends"})},q=s(44),V=s.n(q),$=function(){return Object(F.jsx)("div",{className:V.a.settings,children:"Settings"})},ee=s(21),te=s.n(ee),se=s(45),ne=s.n(se),ae=function(e){return Object(F.jsx)("div",{className:ne.a.message,children:e.message})},ie=s(46),re=s.n(ie),ce=function(e){var t="/messages/"+e.id;return Object(F.jsxs)("div",{className:re.a.dialog,children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:e.img})}),Object(F.jsx)("div",{children:Object(F.jsx)(M.b,{to:t,children:e.name})})]})},oe=function(e){var t=e.messagesPage.users.map((function(e){return Object(F.jsx)(ce,{name:e.name,id:e.id,img:e.img},e.id)})),s=e.messagesPage.messages.map((function(e){return Object(F.jsx)(ae,{message:e.message,id:e.id},e.id)}));return Object(F.jsxs)("div",{className:te.a.dialogs,children:[Object(F.jsx)("div",{className:te.a.dialogItem,children:t}),Object(F.jsxs)("div",{className:te.a.messages,children:[s,Object(F.jsx)("div",{children:Object(F.jsx)("textarea",{onChange:function(t){var s=t.currentTarget.value;e.onMessagePost(s)},value:e.messagesPage.newMessageText,rows:10,cols:44,placeholder:"Write your message"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{disabled:""===e.messagesPage.newMessageText.trim(),onClick:function(){e.addMessage()},children:"Add message"})})]})]})},ue=s(6),le=s(50),de=function(e){return{isAuth:e.auth.isAuth}};function je(e){return Object(ue.b)(de)((function(t){var s=t.isAuth,n=Object(le.a)(t,["isAuth"]);return s?Object(F.jsx)(e,Object(u.a)({},n)):Object(F.jsx)(W.a,{to:"/login"})}))}var ge=Object(c.c)(Object(ue.b)((function(e){return{messagesPage:e.messagesPage}}),(function(e){return{addMessage:function(){e({type:"ADD_MESSAGE"})},onMessagePost:function(t){e(v(t||""))}}})),je)(oe),be=s(10),pe=s(11),he=s(13),Oe=s(12),fe=s(26),me=s.n(fe),xe=s.p+"static/media/user.00d92f05.png",ve=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize)/200,s=[],n=1;n<=t;n++)s.push(n);return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:s.map((function(t){return Object(F.jsx)("span",{className:e.currentPage===t?me.a.selectedPage:"",onClick:function(){e.onPageChanged(t)},children:t},t)}))}),e.users.map((function(t){return Object(F.jsxs)("div",{children:[Object(F.jsxs)("span",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(M.b,{to:"/profile/"+t.id,children:Object(F.jsx)("img",{src:null!==t.photos.small?t.photos.small:xe,className:me.a.userPhoto,alt:"photo"})})}),Object(F.jsx)("div",{children:t.followed?Object(F.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(F.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(F.jsxs)("span",{children:[Object(F.jsxs)("span",{children:[Object(F.jsx)("div",{children:t.name}),Object(F.jsx)("div",{children:t.status})]}),Object(F.jsxs)("span",{children:[Object(F.jsx)("div",{children:"m.location.country"}),Object(F.jsx)("div",{children:"m.location.city"})]})]})]},t.id)}))]})},_e=s.p+"static/media/preloader.1952935e.gif",Pe=s(48),Se=s.n(Pe),Te=function(){return Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:_e,className:Se.a.preloader,alt:"preloader"})})},we=function(e){Object(he.a)(s,e);var t=Object(Oe.a)(s);function s(){var e;Object(be.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(pe.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(F.jsxs)(F.Fragment,{children:[this.props.isFetching?Object(F.jsx)(Te,{}):null,Object(F.jsx)(ve,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.followSuccess,unfollow:this.props.unfollowSuccess,followingInProgress:this.props.followingInProgress,toggleFollowingProgress:this.props.toggleFollowingProgress})]})}}]),s}(a.a.Component),Ee=Object(c.c)(Object(ue.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{followSuccess:S,unfollowSuccess:function(e){return{type:"UNFOLLOW",userID:e}},setCurrentPage:function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},toggleFollowingProgress:w,getUsers:function(e,t){return function(s){s(T(!0)),j(e,t).then((function(e){s(T(!1)),s({type:"SET-USERS",users:e.items}),s({type:"SET-TOTAL-USERS-COUNT",count:e.totalCount})}))}}}),je)(we),Ne=s(49),ye=s.n(Ne),Ae=s(22),Ie=s.n(Ae),Ce=s.p+"static/media/avatar_for_profile.e4c1e159.jpg",Ue=function(e){Object(he.a)(s,e);var t=Object(Oe.a)(s);function s(){var e;Object(be.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateUserStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(pe.a)(s,[{key:"render",value:function(){return Object(F.jsxs)("div",{children:[!this.state.editMode&&Object(F.jsx)("div",{children:Object(F.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"------"})}),this.state.editMode&&Object(F.jsx)("div",{children:Object(F.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,value:this.state.status,onBlur:this.deactivateEditMode})})]})}}]),s}(a.a.Component),ke=function(e){return Object(F.jsx)("div",{className:Ie.a.profile,children:Object(F.jsxs)("div",{className:Ie.a.avatarBlock,children:[Object(F.jsx)("div",{className:Ie.a.avatar,children:Object(F.jsx)("img",{alt:"ava",src:e.profile&&null!==e.profile.photos.large?e.profile.photos.large:Ce})}),Object(F.jsx)(Ue,{status:e.status,updateUserStatus:e.updateUserStatus})]})})},Me=s(27),Fe=s.n(Me),Le=s(28),De=s.n(Le),Ge=function(e){return Object(F.jsxs)("div",{className:De.a.item,children:[Object(F.jsx)("img",{src:"https://slovami.net/wp-content/uploads/thumbs_dir/the-most-beautiful-guys-russia-4-1-nwkkkydf2f1mhw9a4ijzfs2ktasvevyjiyi4xibqis.jpg",alt:"ava",title:"ava"}),Object(F.jsxs)("div",{className:De.a.itemText,children:[e.message,Object(F.jsx)("div",{children:Object(F.jsxs)("span",{children:["like: ",e.likesCount]})})]})]},e.id)},Re=function(e){var t=e.profilePage.posts.map((function(e){return Object(F.jsx)(Ge,{message:e.message,likesCount:e.likesCount,id:e.id},e.id)}));return Object(F.jsxs)("div",{className:Fe.a.myPosts,children:[Object(F.jsx)("h3",{children:"My posts"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("textarea",{onChange:function(t){var s=t.currentTarget.value;e.updateNewPostText(s)},value:e.profilePage.newPostText,placeholder:"Write your message"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{disabled:""===e.profilePage.newPostText.trim(),onClick:function(){e.onAddPost()},children:"Add post"})})]}),Object(F.jsx)("div",{className:Fe.a.posts,children:t})]})},We=Object(ue.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{onAddPost:function(){e({type:"ADD_POST"})},updateNewPostText:function(t){e(f(t||""))}}}))(Re),He=function(e){return Object(F.jsxs)("div",{className:ye.a.profile,children:[Object(F.jsx)(ke,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),Object(F.jsx)(We,{})]})},ze=function(e){Object(he.a)(s,e);var t=Object(Oe.a)(s);function s(){return Object(be.a)(this,s),t.apply(this,arguments)}return Object(pe.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.userId;e||(e="2"),this.props.getUserProfile(+e),this.props.getUserStatus(+e)}},{key:"render",value:function(){return Object(F.jsx)(He,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus})}}]),s}(a.a.Component),Be=Object(c.c)(Object(ue.b)((function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth,status:e.profilePage.status}}),{getUserProfile:function(e){return function(t){g(e).then((function(e){t({type:"SET-USER-PROFILE",profile:e.data})}))}},getUserStatus:function(e){return function(t){b(e).then((function(e){t(m(e.data))}))}},updateUserStatus:function(e){return function(t){p(e).then((function(s){0===s.data.resultCode&&t(m(e))}))}}}),(function(e){return function(t){var s=Object(W.h)(),n=Object(W.f)();return Object(F.jsx)(e,Object(u.a)(Object(u.a)({},t),{},{userId:s.userId,location:n}))}}))(ze),Xe=s(29),Ze=s.n(Xe),Ke=s.p+"static/media/logo.cbfad428.png",Ye=function(e){return Object(F.jsxs)("header",{className:Ze.a.header,children:[Object(F.jsx)("img",{src:Ke,alt:"logo",title:"image logo"}),Object(F.jsx)("div",{className:Ze.a.loginBlock,children:e.isAuth?e.login:Object(F.jsx)(M.b,{to:"/login",children:"Login"})})]})},Je=function(e){Object(he.a)(s,e);var t=Object(Oe.a)(s);function s(){return Object(be.a)(this,s),t.apply(this,arguments)}return Object(pe.a)(s,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(F.jsx)(Ye,{isAuth:this.props.isAuth,login:this.props.login})}}]),s}(a.a.Component),Qe=Object(ue.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.data.login}}),{getAuthUserData:function(){return function(e){h().then((function(t){if(0===t.data.resultCode){var s=t.data.data,n=s.id,a=s.email,i=s.login;e(function(e,t,s){return{type:"SET-USER-DATA",data:{userId:e,email:t,login:s}}}(n,a,i))}}))}}})(Je),qe=function(e){return Object(F.jsx)("h1",{children:"LOGIN"})};var Ve=function(){return Object(F.jsxs)("main",{className:C.a.appContent,children:[Object(F.jsx)(Qe,{}),Object(F.jsx)(L,{}),Object(F.jsx)("div",{className:C.a.appContentWindow,children:Object(F.jsxs)(W.d,{children:[Object(F.jsx)(W.b,{path:"/profile/",element:Object(F.jsx)(Be,{}),children:Object(F.jsx)(W.b,{path:":userId",element:Object(F.jsx)(Be,{})})}),Object(F.jsx)(W.b,{path:"/messages/",element:Object(F.jsx)(ge,{}),children:Object(F.jsx)(W.b,{path:":userId",element:Object(F.jsx)(ge,{})})}),Object(F.jsx)(W.b,{path:"/users/*",element:Object(F.jsx)(Ee,{})}),Object(F.jsx)(W.b,{path:"/news/*",element:Object(F.jsx)(B,{})}),Object(F.jsx)(W.b,{path:"/music/*",element:Object(F.jsx)(K,{})}),Object(F.jsx)(W.b,{path:"/settings/*",element:Object(F.jsx)($,{})}),Object(F.jsx)(W.b,{path:"/friends/*",element:Object(F.jsx)(Q,{})}),Object(F.jsx)(W.b,{path:"/login",element:Object(F.jsx)(qe,{})})]})}),Object(F.jsx)(R,{})]})};r.a.render(Object(F.jsx)(M.a,{children:Object(F.jsx)(ue.a,{store:A,children:Object(F.jsx)(Ve,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.de1989b3.chunk.js.map