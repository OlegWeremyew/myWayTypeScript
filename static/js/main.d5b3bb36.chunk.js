(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[1],{138:function(e,t,n){},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m}));var r,a=n(7),s=n.n(a),c=n(9),i=n(3),o=n(6),u=n(24),l=function(){return o.b.get("auth/me").then((function(e){return e.data}))},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o.b.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},f=function(){return o.b.delete("auth/login").then((function(e){return e.data}))},p=function(){return o.b.get("security/get-captcha-url").then((function(e){return e.data}))};!function(e){e.SET_USER_DATA="SOCIAL_NETWORK/AUTH/SET-USER-DATA",e.GET_CAPTCHA_URL_SUCCESS="GET_CAPTCHA_URL_SUCCESS"}(r||(r={}));var O={data:{},isFetching:!0,isAuth:!1,userID:null,email:null,login:null,captchaUrl:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_USER_DATA:return Object(i.a)(Object(i.a)({},e),{},{data:Object(i.a)(Object(i.a)({},e.data),{},{email:t.payload.email,login:t.payload.login,userId:t.payload.userId}),userID:t.payload.userId,isAuth:t.payload.isAuth});case r.GET_CAPTCHA_URL_SUCCESS:return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},b=function(e,t,n,a){return{type:r.SET_USER_DATA,payload:{userId:e,email:t,login:n,isAuth:a}}},h=function(e){return{type:r.GET_CAPTCHA_URL_SUCCESS,payload:{captchaUrl:e}}},S=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,a,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:(n=e.sent).resultCode===o.a.Success&&(r=n.data,a=r.id,c=r.email,i=r.login,t(b(a,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e,t,n,r){return function(){var a=Object(c.a)(s.a.mark((function a(c){var i,l;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d(e,t,n,r);case 2:(i=a.sent).resultCode===o.a.Success?c(S()):(i.resultCode===o.a.Error&&c(_()),l=i.messages.length>0?i.messages[0]:"Some error",c(Object(u.a)("Login",{_error:l})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},_=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:n=e.sent,r=n.url,t(h(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:e.sent.resultCode===o.a.Success&&t(b(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},225:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),c=n(42),i=n.n(c),o=(n(138),n(29)),u=n(30),l=n(32),d=n(31),f=n(49),p=n.n(f),O=n(4),j=n(12),b=n(23),h=n(33),S=n(58),g=n(68),_={},m=n(74),E=n(21),T=n(79),v=n(75),x=n(3),I={initialized:!1};!function(e){e.SET_INITIALIZED="SOCIAL_NETWORK/APP/SET-INITIALIZED"}(r||(r={}));var A=function(){return{type:r.SET_INITIALIZED}},L=Object(h.c)({profilePage:S.d,messagesPage:g.b,sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return e},usersPage:m.c,auth:E.a,form:v.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_INITIALIZED:return Object(x.a)(Object(x.a)({},e),{},{initialized:!0});default:return e}}}),y=Object(h.e)(L,Object(h.a)(T.a));window.store=y;var C=n(80),N=n.n(C),w=n(1),R=function(){return Object(w.jsx)("div",{className:N.a.news,children:"News"})},P=n(81),U=n.n(P),D=function(){return Object(w.jsx)("div",{className:U.a.music,children:"Music"})},F=n(82),G=n.n(F),k=function(){return Object(w.jsx)("div",{className:G.a.friends,children:"Friends"})},W=n(83),H=n.n(W),K=function(){return Object(w.jsx)("div",{className:H.a.settings,children:"Settings"})},M=n(50),z=n.n(M),V=n.p+"static/media/logo.cbfad428.png",B=function(e){return Object(w.jsxs)("header",{className:z.a.header,children:[Object(w.jsx)("img",{src:V,alt:"logo",title:"image logo"}),Object(w.jsx)("div",{className:z.a.loginBlock,children:e.isAuth?Object(w.jsxs)("div",{children:[e.login," - ",Object(w.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(w.jsx)(j.b,{to:"/login",children:"Login"})})]})},Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(w.jsx)(B,{isAuth:this.props.isAuth,login:this.props.login,logout:this.props.logout})}}]),n}(s.a.Component),J=Object(b.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.data.login}}),{logout:E.d})(Z),q=n(53),X=function(){return Object(w.jsx)("h1",{children:"404. Page not found"})},Y=n(8),Q=n.n(Y),$=function(){return Object(w.jsxs)("nav",{className:Q.a.nav,children:[Object(w.jsx)("div",{className:Q.a.item,children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/profile",children:"Profile"})}),Object(w.jsx)("div",{className:"".concat(Q.a.item," ").concat(Q.a.active),children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/messages",children:"Message"})}),Object(w.jsx)("div",{className:"".concat(Q.a.item," ").concat(Q.a.active),children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/users",children:"Users"})}),Object(w.jsx)("div",{className:Q.a.item,children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/news",children:"News"})}),Object(w.jsx)("div",{className:Q.a.item,children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/music",children:"Music"})}),Object(w.jsx)("div",{className:Q.a.item,children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/settings",children:"Settings"})}),Object(w.jsx)("div",{className:Q.a.item,children:Object(w.jsx)(j.b,{className:function(e){return e.isActive?Q.a.activeLink:""},to:"/friends",children:"Friends"})})]})},ee=n(85),te=n.n(ee),ne=function(){return Object(w.jsx)("div",{className:te.a.footer,children:"Footer"})},re=s.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,306))})),ae=s.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,304))})),se=s.a.lazy((function(){return n.e(6).then(n.bind(null,305))})),ce=s.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,307))})),ie=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(w.jsxs)("main",{className:p.a.appContent,children:[Object(w.jsx)(J,{}),Object(w.jsx)($,{}),Object(w.jsx)("div",{className:p.a.appContentWindow,children:Object(w.jsxs)(O.d,{children:[Object(w.jsx)(O.b,{path:"/",element:Object(w.jsx)(O.a,{to:"profile"})}),Object(w.jsx)(O.b,{path:"/profile/",element:Object(w.jsx)(ae,{}),children:Object(w.jsx)(O.b,{path:":userId",element:Object(w.jsx)(ae,{})})}),Object(w.jsx)(O.b,{path:"/messages/",element:Object(w.jsx)(re,{}),children:Object(w.jsx)(O.b,{path:":userId",element:Object(w.jsx)(re,{})})}),Object(w.jsx)(O.b,{path:"/users/*",element:Object(w.jsx)(se,{})}),Object(w.jsx)(O.b,{path:"/news/*",element:Object(w.jsx)(R,{})}),Object(w.jsx)(O.b,{path:"/music/*",element:Object(w.jsx)(D,{})}),Object(w.jsx)(O.b,{path:"/settings/*",element:Object(w.jsx)(K,{})}),Object(w.jsx)(O.b,{path:"/friends/*",element:Object(w.jsx)(k,{})}),Object(w.jsx)(O.b,{path:"/login",element:Object(w.jsx)(ce,{})}),Object(w.jsx)(O.b,{path:"*",element:Object(w.jsx)(X,{})})]})}),Object(w.jsx)(ne,{})]}):Object(w.jsx)(q.a,{})}}]),n}(s.a.Component),oe=Object(b.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Object(E.b)());Promise.all([t]).then((function(){e(A())}))}}})(ie),ue=function(){return Object(w.jsx)(s.a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(j.a,{children:Object(w.jsx)(b.a,{store:y,children:Object(w.jsx)(oe,{})})})})};i.a.render(Object(w.jsx)(ue,{}),document.getElementById("root"))},49:function(e,t,n){e.exports={appContent:"App_appContent__4mg9X",appContentWindow:"App_appContentWindow__dnoS0"}},50:function(e,t,n){e.exports={header:"Header_header__3WLj3",loginBlock:"Header_loginBlock__3D_es"}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n.p+"static/media/preloader.1952935e.gif",a=n(84),s=n.n(a),c=n(1),i=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:r,className:s.a.preloader,alt:"preloader"})})}},58:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return _})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return T}));var r,a=n(7),s=n.n(a),c=n(9),i=n(18),o=n(3),u=n(6),l=n(24),d=function(e){return u.b.get("profile/".concat(e)).then((function(e){return e.data}))},f=function(e){return u.b.get("profile/status/".concat(e)).then((function(e){return e.data}))},p=function(e){return u.b.put("profile/status",{status:e}).then((function(e){return e.data}))},O=function(e){var t=new FormData;return t.append("image",e),u.b.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},j=function(e){return u.b.put("profile",e).then((function(e){return e.data}))};!function(e){e.ADD_POST="SOCIAL_NETWORK/PROFILE/ADD_POST",e.DELETED_POST="SOCIAL_NETWORK/PROFILE/DELETED_POST",e.SET_USER_PROFILE="SOCIAL_NETWORK/PROFILE/SET-USER-PROFILE",e.SET_STATUS="SOCIAL_NETWORK/PROFILE/SET-STATUS",e.SAVE_PHOTO="SOCIAL_NETWORK/PROFILE/SAVE_PHOTO_SUCCESS"}(r||(r={}));var b={posts:[{message:"Hello",likesCount:12,id:1},{message:"Dinosaurs are great",likesCount:17,id:2}],profile:null,status:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_POST:var n={id:(new Date).getTime(),message:t.payload.newPostText,likesCount:12};return Object(o.a)(Object(o.a)({},e),{},{posts:[].concat(Object(i.a)(e.posts),[n])});case r.DELETED_POST:return Object(o.a)(Object(o.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.postId}))});case r.SET_USER_PROFILE:return Object(o.a)(Object(o.a)({},e),{},{profile:t.payload.profile});case r.SET_STATUS:return Object(o.a)(Object(o.a)({},e),{},{status:t.payload.status});case r.SAVE_PHOTO:return Object(o.a)(Object(o.a)({},e),{},{profile:Object(o.a)(Object(o.a)({},e.profile),{},{photos:t.payload.photos})});default:return e}},S={addPost:function(e){return{type:r.ADD_POST,payload:{newPostText:e}}},deletePost:function(e){return{type:r.DELETED_POST,payload:{postId:e}}},setUserProfile:function(e){return{type:r.SET_USER_PROFILE,payload:{profile:e}}},setStatus:function(e){return{type:r.SET_STATUS,payload:{status:e}}},savePhotoSuccess:function(e){return{type:r.SAVE_PHOTO,payload:{photos:e}}}},g=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e);case 2:r=t.sent,n(S.setUserProfile(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:r=t.sent,n(S.setStatus(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(e);case 3:t.sent.resultCode===u.a.Success?n(S.setStatus(e)):console.log("resultCode < 0"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(t){O(e).then((function(e){e.resultCode===u.a.Success&&t(S.savePhotoSuccess(e.data.photos))}))}},T=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n,r){var a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userID,t.next=3,j(e);case 3:if((c=t.sent).resultCode!==u.a.Success){t.next=8;break}n(g(a)),t.next=10;break;case 8:return n(Object(l.a)("edit-profile",{_error:c.messages[0]})),t.abrupt("return",Promise.reject(c.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var r,a=n(77),s=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f5a121b3-d5d2-4866-a73a-ab1418f0e4d8"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}))},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r,a=n(18),s=n(3);!function(e){e.ADD_MESSAGE="SOCIAL_NETWORK/MESSAGES/ADD_MESSAGE"}(r||(r={}));var c={users:[{name:"Oleg",id:1,img:"https://avatars.mds.yandex.net/get-zen_doc/3986249/pub_607ecd1d13c71c1ca8a34192_607ee065330a4f14d551104b/scale_1200"},{name:"Diana",id:2,img:"https://avatars.mds.yandex.net/i?id=64b380ea3aa0d80cad94cb1a24a3b3f5-4233014-images-thumbs&ref=rim&n=33&w=150&h=150"},{name:"Fat cat",id:3,img:"https://data.whicdn.com/images/310252363/original.jpg"},{name:"Dmitriy",id:4,img:"https://i.pinimg.com/originals/b7/44/46/b744464dd3d970ad96745be8de69d755.jpg"},{name:"Ella",id:5,img:"https://st.depositphotos.com/1023162/5099/i/950/depositphotos_50991807-stock-photo-sexy-woman-in-fashion-sunglasses.jpg"},{name:"Marat",id:6,img:"https://avatars.mds.yandex.net/i?id=55d09aa1629f72a149098b2c3127e039-5222024-images-thumbs&ref=rim&n=33&w=150&h=150"}],messages:[{message:"Hi",id:1},{message:"Ho",id:2},{message:"He",id:3},{message:"Hu",id:4},{message:"Hio",id:5},{message:"Hia",id:6}]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_MESSAGE:var n={id:(new Date).getTime(),message:t.payload.newMessageText};return Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}},o={addMessage:function(e){return{type:r.ADD_MESSAGE,payload:{newMessageText:e}}}}},74:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j}));var r,a=n(7),s=n.n(a),c=n(9),i=n(18),o=n(3),u=n(6),l=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(o.a)(Object(o.a)({},e),r):e}))},d={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return u.b.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return u.b.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return u.b.delete("follow/".concat(e)).then((function(e){return e.data}))}};!function(e){e.FOLLOW="SOCIAL_NETWORK/USERS/FOLLOW",e.UNFOLLOW="SOCIAL_NETWORK/USERS/UNFOLLOW",e.SET_USERS="SOCIAL_NETWORK/USERS/SET_USERS",e.SET_CURRENT_PAGE="SOCIAL_NETWORK/USERS/SET-CURRENT-PAGE",e.SET_TOTAL_USERS_COUNT="SOCIAL_NETWORK/USERS/SET-TOTAL-USERS-COUNT",e.TOGGLE_IS_FETCHING="SOCIAL_NETWORK/USERS/TOGGLE-IS-FETCHING",e.TOGGLE_IS_FOLLOWING_IN_PROGRESS="SOCIAL_NETWORK/USERS/TOGGLE-IS-FOLLOWING-IN-PROGRESS"}(r||(r={}));var f={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.FOLLOW:return Object(o.a)(Object(o.a)({},e),{},{users:l(e.users,t.payload.userID,"id",{followed:!0})});case r.UNFOLLOW:return Object(o.a)(Object(o.a)({},e),{},{users:l(e.users,t.payload.userID,"id",{followed:!1})});case r.SET_USERS:return Object(o.a)(Object(o.a)({},e),{},{users:Object(i.a)(t.payload.users)});case r.SET_CURRENT_PAGE:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.payload.currentPage});case r.SET_TOTAL_USERS_COUNT:return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.payload.count});case r.TOGGLE_IS_FETCHING:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.payload.isFetching});case r.TOGGLE_IS_FOLLOWING_IN_PROGRESS:return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.payload.followingInProgress?[].concat(Object(i.a)(e.followingInProgress),[t.payload.userId]):e.followingInProgress.filter((function(e){return e!==t.payload.userId}))});default:return e}},O={followSuccess:function(e){return{type:r.FOLLOW,payload:{userID:e}}},unfollowSuccess:function(e){return{type:r.UNFOLLOW,payload:{userID:e}}},setUsers:function(e){return{type:r.SET_USERS,payload:{users:e}}},setCurrentPage:function(e){return{type:r.SET_CURRENT_PAGE,payload:{currentPage:e}}},setTotalUsersCount:function(e){return{type:r.SET_TOTAL_USERS_COUNT,payload:{count:e}}},toggleIsFetching:function(e){return{type:r.TOGGLE_IS_FETCHING,payload:{isFetching:e}}},toggleFollowingProgress:function(e,t){return{type:r.TOGGLE_IS_FOLLOWING_IN_PROGRESS,payload:{followingInProgress:e,userId:t}}}},j=function(e,t){return function(){var n=Object(c.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(O.toggleIsFetching(!0)),r(O.setCurrentPage(e)),n.next=4,d.getUsers(e,t);case 4:a=n.sent,r(O.toggleIsFetching(!1)),r(O.setUsers(a.items)),r(O.setTotalUsersCount(a.totalCount));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},8:function(e,t,n){e.exports={nav:"Navbar_nav__1Fdz2",item:"Navbar_item__1onIf",activeLink:"Navbar_activeLink__f94mN"}},80:function(e,t,n){e.exports={news:"News_news__37yFc"}},81:function(e,t,n){e.exports={music:"Music_music__JnEwt"}},82:function(e,t,n){e.exports={friends:"Friends_friends__2_1Vc"}},83:function(e,t,n){e.exports={settings:"Settings_settings__Wu77x"}},84:function(e,t,n){e.exports={preloader:"Preloader_preloader__3C5_j"}},85:function(e,t,n){e.exports={footer:"Footer_footer__mhg74"}}},[[225,2,3]]]);
//# sourceMappingURL=main.d5b3bb36.chunk.js.map